<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Recipes Steps for Supervised Filter-Based Feature Selection • colino</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Recipes Steps for Supervised Filter-Based Feature Selection">
<meta name="description" content="Provides supervised selection methods to be used as preprocessing steps alongside the recipes package. These steps represent filter-based methods where the features are ranked according to the feature selection method and a subset of features are retained.">
<meta property="og:description" content="Provides supervised selection methods to be used as preprocessing steps alongside the recipes package. These steps represent filter-based methods where the features are ranked according to the feature selection method and a subset of features are retained.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">colino</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stevenpawley/colino/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="colino">colino<a class="anchor" aria-label="anchor" href="#colino"></a>
</h1></div>
<p>The goal of colino is to provide supervised feature selection steps to be used with the tidymodels recipes package. The overall focus of the package is on filter-based feature selection methods. Permutation score methods that use a model can be considered a special case of filter approaches.</p>
<p>Note - colino is the new package name and replaces the preliminary ‘recipeselectors’ name. Colino will be submitted to CRAN once some additional steps and documentation have been finalized.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"stevenpawley/colino"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="feature-selection-methods">Feature Selection Methods<a class="anchor" aria-label="anchor" href="#feature-selection-methods"></a>
</h2>
<p>The following feature selection methods are implemented:</p>
<ul>
<li><p><code>step_select_infgain</code> provides Information Gain feature selection. This step requires the <code>FSelectorRcpp</code> package to be installed and can be used for both classification and regression problems. For regression, the target variable is discretized using equal frequency binning.</p></li>
<li><p><code>step_select_mrmr</code> provides maximum Relevancy Minimum Redundancy feature selection. This step requires the <code>praznik</code> package to be installed. This step can be used for classification and regression problems. Similar to information gain, binning is used when the target variable is continuous.</p></li>
<li><p><code>step_select_roc</code> provides ROC-based feature selection based on each predictors’ relationship with the response outcomes measured using a Receiver Operating Characteristic curve.</p></li>
<li><p><code>step_select_xtab</code> provides feature selection of categorical predictors using statistical association for numeric response outcomes.</p></li>
<li><p><code>step_select_aov</code> provides feature selection of categorical predictors using the ANOVA F-test for numeric response outcomes.</p></li>
<li><p><code>step_select_vip</code> provides model-based selection using feature importance scores or coefficients. This method allows a <code>parsnip</code> model specification to be used to select a subset of features based on the models’ feature importances or coefficients. See below for details.</p></li>
<li><p><code>step_select_boruta</code> provides a Boruta feature selection step. This step can be used for classification and regression problems.</p></li>
<li><p><code>step_select_carscore</code> provides a CAR score feature selection step for regression models. This step requires the <code>care</code> package to be installed.</p></li>
<li><p><code>step_select_relief</code> provides a Relief-based feature selection step for classification and regression models. This step requires the <code>FSelectorRcpp</code> package to be installed.</p></li>
<li><p><code>step_select_forests</code>, <code>step_select_tree</code>, and <code>step_select_linear</code> provide model-based methods of selecting a subset of features based on the model’s feature importance scores or coefficients.</p></li>
<li><p><code>step_select_fcbf</code> provides the Fast Correlation Based Filter method of Yu and Liu, 2003: Feature Selection for High-Dimensional Data: A Fast Correlation-Based Filter Solution. This step is implemented in the Bioconductor package ‘FCBF’ which can be installed using <code>BiocManager::install("FCBF")</code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="feature-selection-criteria">Feature Selection Criteria<a class="anchor" aria-label="anchor" href="#feature-selection-criteria"></a>
</h2>
<p>Three parameters are used to filter features within the <code>step_select_</code> functions in colino:</p>
<ul>
<li><p><code>top_p</code> can be used to select the number of best scoring features to retain. This is nice because it is intuitive, but it suffers from the issue that you do not always know how many features are present in your recipe, if you have added/removed features in preceding recipe steps.</p></li>
<li><p><code>threshold</code> can be used to select the percentile of best-scoring features. For example <code>threshold = 0.9</code> will retain only predictors with scores in the top 90th percentile and a smaller threshold value will select more features.</p></li>
<li><p><code>cutoff</code> is a new argument that can use used to select features based on their absolute feature scores. For example, if a <code>step_select_</code> method is based on the p-values of features, then <code>cutoff</code> can be used to threshold the features based on their p-value units. This requires knowledge of the domain space of those values for any particular method.</p></li>
</ul>
<p>Note that <code>top_p</code> and <code>threshold</code> are mutually exclusive but either can be used in conjunction with <code>cutoff</code> to select the top-ranked features and those that have filter scores that meet the cutoff threshold. For example, you can require at least three features to be included by using <code>top_n = 3</code> but also include any other features that meet the cutoff criteria, e.g., cutoff = 0.01 if a method uses p-value units.</p>
<p>Most <code>step_select_</code> steps have <code>top_p</code>, <code>threshold</code> and <code>cutoff</code> available but a few methods such as Boruta and FCBF do not rank the features, but only provide a list of rejected features. These methods typically only have none of these arguments, or only <code>cutoff</code>.</p>
</div>
<div class="section level2">
<h2 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a>
</h2>
<p>The <code>step_select_vip</code> is designed to work with the <code>parsnip</code> package and requires a base model specification that provides a method of ranking the importance of features, such as feature importance scores or coefficients, with one score per feature. The base model is specified in the step using the <code>model</code> parameter.</p>
<p>Although <code>step_select_vip</code> allows a diverse range of models to be used as the ranking algorithm, and potentially allows new models to be implemented, a limitation is that the hyperparameters of the ranking model cannot be tuned. As an alternative, <code>step_select_linear</code>, <code>step_select_tree</code> and <code>step_select_forests</code> provide steps specific to these types of models where the hyperparameters of ranking model can be tuned using the same tuning arguments as <code>parsnip</code>.</p>
<p>The parsnip package does not currently contain a method of pulling feature importance scores from models that support them. The <code>colino</code> package provides a generic function <code>pull_importances</code> for this purpose that accepts a fitted parsnip model, and returns a tibble with two columns ‘feature’ and ‘importance’:</p>
<pre><code><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">boost_tree</span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"classification"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">set_engine</span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_fit</span> <span class="op">&lt;-</span> <span class="va">model</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">fit</span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span><span class="va">.</span>, <span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/pull_importances.html">pull_importances</a></span><span class="op">(</span><span class="va">model_fit</span><span class="op">)</span></span></code></pre>
<p>Most of the models and ‘engines’ that provide feature importances are implemented. In addition, <code>h2o</code> models are supported using the <code>agua</code> package. Use <code>methods(pull_importances)</code> to list models that are currently implemented. If need to pull the feature importance scores from a model that is not currently supported in this package, then you can add a class to the pull_importances generic function which returns a two-column tibble:</p>
<pre><code><span><span class="va">pull_importances._ranger</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">scaled</span> <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">ranger</span><span class="fu">::</span><span class="fu"><a href="http://imbs-hl.github.io/ranger/reference/importance.ranger.html" class="external-link">importance</a></span><span class="op">(</span><span class="va">object</span><span class="op">$</span><span class="va">fit</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># create a tibble with 'feature' and 'importance' columns</span></span>
<span>  <span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    feature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span>,</span>
<span>    importance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">scores</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># optionally rescale the importance scores</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">scaled</span><span class="op">)</span></span>
<span>    <span class="va">scores</span><span class="op">$</span><span class="va">importance</span> <span class="op">&lt;-</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/rescale.html" class="external-link">rescale</a></span><span class="op">(</span><span class="va">scores</span><span class="op">$</span><span class="va">importance</span><span class="op">)</span></span>
<span>  <span class="va">scores</span></span>
<span><span class="op">}</span></span></code></pre>
<p>An example of using the step_importance function:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/parsnip" class="external-link">parsnip</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/recipes" class="external-link">recipes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the example iris dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># define a base model to use for feature importances</span></span>
<span><span class="va">base_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/rand_forest.html" class="external-link">rand_forest</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"classification"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"ranger"</span>, importance <span class="op">=</span> <span class="st">"permutation"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a preprocessing recipe</span></span>
<span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="reference/step_select_vip.html">step_select_vip</a></span><span class="op">(</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html" class="external-link">all_predictors</a></span><span class="op">(</span><span class="op">)</span>, model <span class="op">=</span> <span class="va">base_model</span>, top_p <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                outcome <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prepped</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep</a></span><span class="op">(</span><span class="va">rec</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a model specification</span></span>
<span><span class="va">clf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/decision_tree.html" class="external-link">decision_tree</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"classification"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"rpart"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">clf_fitted</span> <span class="op">&lt;-</span> <span class="va">clf</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span>, <span class="fu"><a href="https://recipes.tidymodels.org/reference/juice.html" class="external-link">juice</a></span><span class="op">(</span><span class="va">prepped</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/stevenpawley/colino/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/stevenpawley/colino/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing colino</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Steven Pawley <br><small class="roles"> Author, maintainer </small>  </li>
<li>Max Kuhn <br><small class="roles"> Author </small>  </li>
<li>Rowan Jacques-Hamilton <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steven Pawley, Max Kuhn, Rowan Jacques-Hamilton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
